<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>QR1 Multilang</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  .language-selector { margin-bottom: 20px; }
</style>
</head>
<body>

<div class="language-selector">
  <label for="language">Select language:</label>
  <select id="language"></select>
</div>

<h1 id="title"></h1>
<h2 id="subtitle"></h2>
<p><strong id="ingredients-label"></strong></p>
<p><strong id="nutrition-label"></strong></p>
<p><strong id="allergens-label"></strong></p>
<p><strong id="alcohol-label"></strong></p>
<button id="more-btn"></button>
<button id="view-btn"></button>

<script>
async function loadTranslations() {
    const response = await fetch('qr1_labels_22lang.json');
    const translations = await response.json();

    const langSelect = document.getElementById('language');
    const langs = Object.keys(translations);

    for (const code of langs) {
        const opt = document.createElement('option');
        opt.value = code;
        opt.textContent = code;
        langSelect.appendChild(opt);
    }

    function applyLang(lang) {
        const t = translations[lang] || translations['en'];
        document.getElementById('title').textContent = t.title;
        document.getElementById('subtitle').textContent = t.subtitle;
        document.getElementById('ingredients-label').textContent = t.ingredients;
        document.getElementById('nutrition-label').textContent = t.nutrition;
        document.getElementById('allergens-label').textContent = t.allergens;
        document.getElementById('alcohol-label').textContent = t.alcohol;
        document.getElementById('more-btn').textContent = t.more;
        document.getElementById('view-btn').textContent = t.view;
    }

    langSelect.addEventListener('change', () => applyLang(langSelect.value));

    const browserLang = navigator.language.slice(0,2);
    langSelect.value = langs.includes(browserLang) ? browserLang : 'en';
    applyLang(langSelect.value);
}

loadTranslations();
</script>

</body>
</html>
